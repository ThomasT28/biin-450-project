# Run Esearch to Identify Articles of Interest

import os
from Bio import Entrez

Entrez.email = "ttragale@ramapo.edu"  # Always tell NCBI who you are

handle = Entrez.esearch(db="pubmed", term="Aging[title] AND human[Organism] AND ( Aging/prevention and control[Mesh] OR Longevity[Mesh] )", retmax="10" )
record = Entrez.read(handle)
handle.close()

ids = record["IdList"]
print(ids)

# Obtain XML File of Pubmed Article (by id)

handle = Entrez.efetch(db="pubmed", id=str(ids[0]), retmode="xml")
record = Entrez.read(handle)
handle.close()

print(record)

# Download Pubmed Article Summary as .txt (write to new .txt file)

filename = 'example-pubmed-download.txt' 
net_handle = Entrez.efetch(db="pubmed", id=str(ids[0]), rettype="docsum", retmode="text")

local_handle = open(filename, "w")
local_handle.write(net_handle.read())
local_handle.close()

net_handle.close()
